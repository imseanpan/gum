<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Gum.SASS template page</title>

    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

    <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!-- Include the compiled Gum.SASS CSS -->
    <link href="../../gum.ui.sass/gum.css" rel="stylesheet">

</head>
<!--ontouchstart 解决IOS内不能点击的问题-->
<body>

<!-- Make sure all your bars are the first things in your <body> -->
<header class="bar bar-nav">
    <h1 class="title">列表</h1>
</header>

<!-- Wrap all non-bar HTML in the .content div (this is actually what scrolls) -->
<div class="content">
    <ul class="table-view">
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>
                被保险人
            </a>
        </li>
        <li id="one1" class="table-view-cell-arrow">
            <a id="one11" class="navigate-right ">
                <span class="badge-arrow">身份证</span>
            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right-down">
                <span class="badge-arrow">王灿王灿王灿王灿王灿王灿王灿王灿</span>
                <span class="right-span">哈哈哈</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right-up">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>

            </a>
        </li>
        <li id="li1" class="table-view-cell-arrow">
            <a class="navigate-right-down">
                <span class="badge-arrow">王灿王灿王灿王灿王灿王灿王灿王灿</span>
            </a>
        </li>
        <li id="il000" class="table-view-cell-arrow collapse-show">
            <a class="navigate-right-down">
                <span class="badge-arrow">a</span>
            </a>
        </li>
        <li id="il2" class="table-view-cell-arrow collapse-show">
            <a class="navigate-right-down">
                <span class="badge-arrow">b</span>
            </a>
        </li>
        <li id="il3" class="table-view-cell-arrow collapse-show">
            <a class="navigate-right-down">
                <span class="badge-arrow">b</span>
            </a>
        </li>
        <li id="il4" class="table-view-cell-arrow collapse-show">
            <a class="navigate-right-down">
                <span class="badge-arrow">b</span>
            </a>
        </li>
        <li id="il5" class="table-view-cell-arrow collapse-show">
            <a class="navigate-right-down">
                <span class="badge-arrow">b</span>
            </a>
        </li>
        <li class="table-view-cell-arrow">
            <a class="navigate-right">
                <span class="badge-arrow">王灿</span>
                被保险人
            </a>
        </li>
    </ul>

</div>
<div id="btnTop" class="scrollToTop">
    <i class="font"></i>
</div>
<script>
    var btnTop = document.getElementById('btnTop');

    btnTop.addEventListener('click',function () {
        scroll_down();
    });

    function scroll_down() {
        var el = document.querySelector('.content');
        smooth_scroll_to(el,0,600);
    }

    function scroll_up() {
        var el = document.querySelector('.content');
        smooth_scroll_to(el,el.scrollTop - 500,600);
    }

    function sequence() {
        var el = document.querySelector('.content');
        smooth_scroll_to(el,el.scrollTop + 500,800).then(function () {
            return smooth_scroll_to(el,el.scrollTop - 200,500);
        }).then(function () {
            return smooth_scroll_to(el,el.scrollTop + 900,400);
        }).catch(function (error) {
            setTimeout(function () {
                alert("Sequence cancelled: " + error);
            },500);
        });
    }


    /**
     Smoothly scroll element to the given target (element.scrollTop)
     for the given duration

     Returns a promise that's fulfilled when done, or rejected if
     interrupted
     */
    var smooth_scroll_to = function (element,target,duration) {
        target   = Math.round(target);
        duration = Math.round(duration);
        if (duration < 0) {
            return Promise.reject("bad duration");
        }
        if (duration === 0) {
            element.scrollTop = target;
            return Promise.resolve();
        }

        var start_time = Date.now();
        var end_time   = start_time + duration;

        var start_top = element.scrollTop;
        var distance  = target - start_top;

        // based on http://en.wikipedia.org/wiki/Smoothstep
        var smooth_step = function (start,end,point) {
            if (point <= start) {
                return 0;
            }
            if (point >= end) {
                return 1;
            }
            var x = (point - start) / (end - start); // interpolation
            return x * x * (3 - 2 * x);
        };

        return new Promise(function (resolve,reject) {
            // This is to keep track of where the element's scrollTop is
            // supposed to be, based on what we're doing
            var previous_top = element.scrollTop;

            // This is like a think function from a game loop
            var scroll_frame = function () {
                if (element.scrollTop != previous_top) {
                    reject("interrupted");
                    return;
                }

                // set the scrollTop for this frame
                var now           = Date.now();
                var point         = smooth_step(start_time,end_time,now);
                var frameTop      = Math.round(start_top + (distance * point));
                element.scrollTop = frameTop;

                // check if we're done!
                if (now >= end_time) {
                    resolve();
                    return;
                }

                // If we were supposed to scroll but didn't, then we
                // probably hit the limit, so consider it done; not
                // interrupted.
                if (element.scrollTop === previous_top
                        && element.scrollTop !== frameTop) {
                    resolve();
                    return;
                }
                previous_top = element.scrollTop;

                // schedule next frame for execution
                setTimeout(scroll_frame,0);
            };

            // boostrap the animation process
            setTimeout(scroll_frame,0);
        });
    }
</script>
</body>
</html>